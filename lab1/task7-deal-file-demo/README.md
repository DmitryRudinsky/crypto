# Задание 7: Демонстрация шифрования файлов с использованием DEAL

## Описание

Данное задание демонстрирует применение алгоритма DEAL (Data Encryption Algorithm with Larger blocks) для шифрования различных типов данных и файлов. Программа использует все типы, реализованные в заданиях 2-6.

## Функциональность

### 1. Шифрование псевдослучайных последовательностей байтов
- Генерация случайных данных различных размеров (64, 256, 1024, 4096 байт)
- Шифрование и дешифрование с проверкой целостности
- Сохранение результатов в файлы

### 2. Шифрование текстовых файлов
- Создание и шифрование текстовых документов
- Полное восстановление текста после дешифрования
- Демонстрация работы с UTF-8 кодировкой

### 3. Сравнение режимов шифрования
Программа тестирует следующие режимы:
- **ECB** (Electronic Codebook) - простейший режим
- **CBC** (Cipher Block Chaining) - цепочка блоков
- **CTR** (Counter) - режим счетчика
- **OFB** (Output Feedback) - обратная связь по выходу
- **CFB** (Cipher Feedback) - обратная связь по шифротексту

Для каждого режима измеряется:
- Время шифрования
- Время дешифрования
- Размер зашифрованных данных
- Корректность восстановления данных

### 4. Сравнение режимов паддинга
Тестирование различных режимов дополнения данных:
- **PKCS7** - стандарт PKCS#7
- **ANSI X.923** - стандарт ANSI X.923
- **ZEROS** - дополнение нулями

Для каждого режима проверяется работа с данными различных размеров.

## Структура проекта

```
task7-deal-file-demo/
├── src/
│   └── DEALFileEncryptionDemo.java  # Главная программа демонстрации
├── out/
│   └── production/                   # Скомпилированные классы
├── test-files/                       # Тестовые файлы
│   ├── random_*.bin                  # Случайные данные
│   ├── random_*.bin.enc              # Зашифрованные данные
│   ├── random_*_decrypted.bin        # Дешифрованные данные
│   ├── document.txt                  # Текстовый документ
│   ├── document.txt.enc              # Зашифрованный текст
│   └── document_decrypted.txt        # Дешифрованный текст
├── build.sh                          # Скрипт компиляции
├── run-demo.sh                       # Скрипт запуска
└── README.md                         # Данный файл
```

## Компиляция

```bash
./build.sh
```

Скрипт автоматически:
1. Компилирует зависимости из заданий 2-6
2. Компилирует исходный код задания 7
3. Создает необходимые директории

## Запуск

```bash
./run-demo.sh
```

## Использованные компоненты

### Из задания 2 (Интерфейсы):
- `SymmetricCipher` - интерфейс симметричного шифра
- `KeySchedule` - интерфейс расписания ключей
- `RoundFunction` - интерфейс раундовой функции
- `CipherContext` - контекст шифрования с поддержкой режимов и паддинга
- `CipherMode` - перечисление режимов шифрования
- `PaddingMode` - перечисление режимов паддинга

### Из задания 3 (Сеть Фейстеля):
- `FeistelCipher` - реализация сети Фейстеля

### Из задания 4 (DES):
- `DES` - реализация алгоритма DES
- `DESKeySchedule` - расписание ключей DES
- `DESRoundFunction` - раундовая функция DES

### Из задания 6 (DEAL):
- `DEAL` - основной класс шифра DEAL
- `DEALKeySchedule` - расписание ключей DEAL
- `DESAdapter` - адаптер DES для использования в Feistel

## Алгоритм DEAL

**DEAL** (Data Encryption Algorithm with Larger blocks) - это 128-битный блочный шифр, использующий DES в качестве строительного блока в сети Фейстеля.

### Параметры:
- **Размер блока**: 128 бит (16 байт)
- **Размер ключа**: 192 бита (24 байта) - три ключа DES
- **Количество раундов**: 6 (по умолчанию)
- **Функция раунда F**: DES

### Схема работы:
1. Входной блок делится на две половины (L, R) по 64 бита
2. Для каждого раунда:
   - L_new = R
   - R_new = L ⊕ DES(R, K_i)
3. После всех раундов половинки объединяются

## Примеры вывода

```
═══════════════════════════════════════════════════════════════════════════════
  ДЕМОНСТРАЦИЯ ШИФРОВАНИЯ ФАЙЛОВ С ИСПОЛЬЗОВАНИЕМ АЛГОРИТМА DEAL
═══════════════════════════════════════════════════════════════════════════════

────────────────────────────────────────────────────────────────────────────────
1. ШИФРОВАНИЕ ПСЕВДОСЛУЧАЙНЫХ ПОСЛЕДОВАТЕЛЬНОСТЕЙ БАЙТОВ
────────────────────────────────────────────────────────────────────────────────
Ключ (24 байта): a3f2...

Тест с данными размером 64 байт:
  ✓ Создан файл: test-files/random_64.bin
    Первые 16 байт: 7f3a...
  ✓ Зашифровано: test-files/random_64.bin.enc
    Размер: 80 байт
  ✓ Дешифровано: test-files/random_64_decrypted.bin
  ✓ Проверка пройдена: данные совпадают!
```

## Требования

- Java 17 или выше (для использования text blocks в строках)
- Bash для запуска скриптов
- Успешно скомпилированные задания 2-6

## Автор

Лабораторная работа №1 по криптографии

